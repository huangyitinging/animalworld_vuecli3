(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b27de37"],{"335c":function(t,e,a){"use strict";var s=a("8631"),r=a.n(s);r.a},"7cb4":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"my-5 row justify-content-center"},[a("div",{staticClass:"col-9"},[t._m(0),a("div",{attrs:{id:"accordionExample"}},[a("div",{staticClass:"card"},[t._m(1),a("div",{staticClass:"collapse show",attrs:{id:"collapseOne","aria-labelledby":"headingOne","data-parent":"#accordionExample"}},[a("div",{staticClass:"card-body"},[a("table",{staticClass:"table",staticStyle:{"font-size":"1rem"}},[t._m(2),a("tbody",t._l(t.cart.carts,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"table-img"},[a("div",{staticStyle:{width:"60%","background-size":"cover","background-position":"center","padding-bottom":"40%"},style:{backgroundImage:"url("+e.product.imageUrl+")"}})]),a("td",{staticClass:"align-middle"},[a("span",[t._v(t._s(e.product.title))])]),a("td",{staticClass:"align-middle"},[t._v(t._s(e.qty)+" / "+t._s(e.product.unit))]),a("td",{staticClass:"align-middle text-right"},[a("div",[t._v(t._s(t._f("currency")(e.final_total)))])])])})),0),a("tfoot",{staticClass:"bg-gray"},[a("tr",[a("td",{staticClass:"text-right text-danger",attrs:{colspan:"3"}},[t._v("總計")]),a("td",{staticClass:"text-right text-danger"},[t._v(t._s(t._f("currency")(t.cart.final_total)))])])])])])])])]),a("div",{staticClass:"h3 text-center text-muted my-4"},[t._v("訂購資料")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"username"}},[t._v("姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"請輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t.errors.has("name")?a("span",{staticClass:"text-danger"},[t._v("姓名輸入錯誤")]):t._e()]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"usertel"}},[t._v("電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("usertel")},attrs:{type:"tel",name:"usertel",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),t.errors.has("usertel")?a("span",{staticClass:"text-danger"},[t._v("電話輸入錯誤")]):t._e()])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useremail"}},[t._v("信箱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),t.errors.has("email")?a("span",{staticClass:"text-danger"},[t._v(" "+t._s(t.errors.first("email"))+" ")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useraddress"}},[t._v("地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),t.errors.has("address")?a("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"comment"}},[t._v("備註(選填)")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"20",rows:"5"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),a("div",{staticClass:"d-flex"},[a("div",{staticClass:"mr-auto"},[a("router-link",{staticClass:"btn btn-outline-secondary text-primary",attrs:{to:"/shoppingcart"}},[a("i",{staticClass:"fas fa-arrow-left mr-2"}),t._v("回上一頁 ")])],1),t._m(3)])])])])],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-center mb-5"},[a("div",{staticClass:"bg-gray progress-list d-md-block d-none"},[a("div",[a("i",{staticClass:"fas fa-cart-plus fa-3x text-muted"})]),a("div",{staticClass:"text-muted h5 mt-2"},[t._v("1.確認清單")])]),a("div",{staticClass:"bg-success progress-list"},[a("div",[a("i",{staticClass:"far fa-credit-card fa-3x text-white"})]),a("div",{staticClass:"text-white h5 mt-2"},[t._v("2.填寫訂購資料")])]),a("div",{staticClass:"bg-gray progress-list d-md-block d-none"},[a("div",[a("i",{staticClass:"fas fa-list-alt fa-3x text-muted"})]),a("div",{staticClass:"text-muted h5 mt-2"},[t._v("3.完成訂單")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header",attrs:{id:"headingOne"}},[a("h2",{staticClass:"mb-0"},[a("button",{staticClass:"btn btn-link",attrs:{type:"button","data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"false","aria-controls":"collapseOne"}},[t._v(" 購物車清單 ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"d-md-table-cell",attrs:{width:"20%"}}),a("th",[t._v("商品名稱")]),a("th",{attrs:{width:"20%"}},[t._v("數量")]),a("th",{attrs:{width:"15%"}},[t._v("小計")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{staticClass:"btn btn-primary text-white"},[t._v("送出訂單 "),a("i",{staticClass:"fas fa-arrow-right ml-2"})])])}],i=(a("99af"),{data:function(){return{products:[],product:{},status:{oadingItem:""},form:{user:{name:"",email:"",tel:"",address:""},message:""},cart:{carts:[]},isLoading:!1,coupon_code:""}},methods:{getCart:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("hexschooleating","/cart");t.isLoading=!0,this.$http.get(e).then((function(e){t.cart=e.data.data,console.log(e.data),t.isLoading=!1}))},createOrder:function(){var t=this,e=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("hexschooleating","/order");this.$validator.validate().then((function(s){s?t.$http.post(a,{data:e.form}).then((function(t){console.log("訂單已建立",t),t.data.success&&(e.$bus.$emit("updateCart"),e.$bus.$emit("message:push",t.data.message,"warning"),e.$router.push("/order/".concat(t.data.orderId))),e.isLoading=!1})):(e.$bus.$emit("updateCart"),e.$bus.$emit("message:push","欄位不完整","danger"))}))}},created:function(){this.getCart()}}),o=i,n=(a("335c"),a("2877")),l=Object(n["a"])(o,s,r,!1,null,null,null);e["default"]=l.exports},8418:function(t,e,a){"use strict";var s=a("c04e"),r=a("9bf2"),i=a("5c6c");t.exports=function(t,e,a){var o=s(e);o in t?r.f(t,o,i(0,a)):t[o]=a}},8631:function(t,e,a){},"99af":function(t,e,a){"use strict";var s=a("23e7"),r=a("d039"),i=a("e8b5"),o=a("861d"),n=a("7b0b"),l=a("50c4"),c=a("8418"),d=a("65f0"),u=a("1dde"),m=a("b622"),v=a("60ae"),f=m("isConcatSpreadable"),p=9007199254740991,g="Maximum allowed index exceeded",h=v>=51||!r((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),C=u("concat"),_=function(t){if(!o(t))return!1;var e=t[f];return void 0!==e?!!e:i(t)},b=!h||!C;s({target:"Array",proto:!0,forced:b},{concat:function(t){var e,a,s,r,i,o=n(this),u=d(o,0),m=0;for(e=-1,s=arguments.length;e<s;e++)if(i=-1===e?o:arguments[e],_(i)){if(r=l(i.length),m+r>p)throw TypeError(g);for(a=0;a<r;a++,m++)a in i&&c(u,m,i[a])}else{if(m>=p)throw TypeError(g);c(u,m++,i)}return u.length=m,u}})}}]);
//# sourceMappingURL=chunk-2b27de37.38a428be.js.map