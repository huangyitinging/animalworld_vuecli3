(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d7e54a0a"],{8418:function(t,o,e){"use strict";var a=e("c04e"),n=e("9bf2"),s=e("5c6c");t.exports=function(t,o,e){var i=a(o);i in t?n.f(t,i,s(0,e)):t[i]=e}},"89ac":function(t,o,e){"use strict";e.r(o);var a=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(o){t.isLoading=o}}}),e("div",{staticClass:"text-right mt-4"},[e("button",{staticClass:"btn btn-primary",on:{click:function(o){return t.openCouponModal(!0)}}},[t._v("建立新的優惠券")])]),e("table",{staticClass:"table mt-4"},[t._m(0),e("tbody",t._l(t.coupons,(function(o,a){return e("tr",{key:a},[e("td",[t._v(t._s(o.title))]),e("td",[t._v(t._s(o.code))]),e("td",[t._v(t._s(o.percent))]),e("td",[t._v(t._s(o.due_date))]),e("td",[o.is_enabled?e("span",{staticClass:"text-success"},[t._v("啟用")]):e("span",[t._v("未啟用")])]),e("td",[e("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(e){return t.openCouponModal(!1,o)}}},[t._v("編輯")]),e("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(e){return t.openDelCouponModal(o)}}},[t._v("刪除")])])])})),0)]),e("div",{staticClass:"modal fade",attrs:{id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(1),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-12"},[e("label",{attrs:{for:"title"}},[t._v("優惠券名稱")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.title,expression:"tempCoupon.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempCoupon.title},on:{input:function(o){o.target.composing||t.$set(t.tempCoupon,"title",o.target.value)}}})]),e("div",{staticClass:"form-group col-12"},[e("label",{attrs:{for:"code"}},[t._v("優惠券代碼")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.code,expression:"tempCoupon.code"}],staticClass:"form-control",attrs:{type:"text",id:"code",placeholder:"請輸入優惠碼"},domProps:{value:t.tempCoupon.code},on:{input:function(o){o.target.composing||t.$set(t.tempCoupon,"code",o.target.value)}}})]),e("div",{staticClass:"form-group col-12"},[e("label",{attrs:{for:"due_date"}},[t._v("到期日")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.due_date,expression:"tempCoupon.due_date"}],staticClass:"form-control",attrs:{type:"date",id:"due_date",placeholder:"請輸入到期日"},domProps:{value:t.tempCoupon.due_date},on:{input:function(o){o.target.composing||t.$set(t.tempCoupon,"due_date",o.target.value)}}})]),e("div",{staticClass:"form-group col-12"},[e("label",{attrs:{for:"percent"}},[t._v("折扣百分比(%)")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.percent,expression:"tempCoupon.percent"}],staticClass:"form-control",attrs:{type:"number",id:"percent",placeholder:"請輸入折扣百分比"},domProps:{value:t.tempCoupon.percent},on:{input:function(o){o.target.composing||t.$set(t.tempCoupon,"percent",o.target.value)}}})])]),e("div",{staticClass:"form-group"},[e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.is_enabled,expression:"tempCoupon.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox","true-value":1,"false-value":0,id:"is_enabled"},domProps:{checked:Array.isArray(t.tempCoupon.is_enabled)?t._i(t.tempCoupon.is_enabled,null)>-1:t._q(t.tempCoupon.is_enabled,1)},on:{change:function(o){var e=t.tempCoupon.is_enabled,a=o.target,n=a.checked?1:0;if(Array.isArray(e)){var s=null,i=t._i(e,s);a.checked?i<0&&t.$set(t.tempCoupon,"is_enabled",e.concat([s])):i>-1&&t.$set(t.tempCoupon,"is_enabled",e.slice(0,i).concat(e.slice(i+1)))}else t.$set(t.tempCoupon,"is_enabled",n)}}}),e("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v(" 是否啟用 ")])])])])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateCoupon}},[t._v("確認")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"delCouponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(2),e("div",{staticClass:"modal-body"},[t._v(" 是否刪除 "),e("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempCoupon.title))]),t._v(" 商品(刪除後將無法恢復)。 ")]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(o){return t.delCoupon()}}},[t._v("確認刪除")])])])])])],1)},n=[function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("thead",[e("tr",[e("th",[t._v("優惠券名稱")]),e("th",[t._v("優惠券代碼")]),e("th",{attrs:{width:"150"}},[t._v("折扣百分比(%)")]),e("th",{attrs:{width:"150"}},[t._v("到期日")]),e("th",{attrs:{width:"150"}},[t._v("是否啟用")]),e("th",{attrs:{width:"150"}},[t._v("編輯")])])])},function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"modal-header bg-dark text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("span",[t._v("新增優惠券")])]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"modal-header bg-danger text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("span",[t._v("刪除產品")])]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],s=(e("99af"),e("1157")),i=e.n(s),l={data:function(){return{coupons:[],tempCoupon:{},pagination:{},isNew:!1,isLoading:!1,status:{fileUploading:!1},coupon_code:""}},methods:{getCoupons:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("hexschooleating","/admin/coupons?page=").concat(t),a={code:o.coupon_code};o.isLoading=!0,this.$http.get(e,{data:a}).then((function(t){console.log(t.data),o.coupons=t.data.coupons,o.pagination=t.data.pagination,o.isLoading=!1}))},openCouponModal:function(t,o){t?(this.tempCoupon={},this.isNew=!0):(this.tempCoupon=Object.assign({},o),this.isNew=!1),i()("#couponModal").modal("show")},updateCoupon:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("hexschooleating","/admin/coupon"),o="post",e=this;e.isNew||(t="".concat("https://vue-course-api.hexschool.io","/api/").concat("hexschooleating","/admin/coupon/").concat(e.tempCoupon.id),o="put"),console.log("https://vue-course-api.hexschool.io","hexschooleating"),this.$http[o](t,{data:e.tempCoupon}).then((function(t){console.log(t.data),t.data.success?(i()("#couponModal").modal("hide"),e.getCoupons()):(i()("#couponModal").modal("hide"),e.getCoupons(),console.log("新增失敗")),e.coupon=t.data.coupon}))},openDelCouponModal:function(t){var o=this;console.log(t),o.tempCoupon=Object.assign({},t),i()("#delCouponModal").modal("show")},delCoupon:function(){var t=this,o="".concat("https://vue-course-api.hexschool.io","/api/").concat("hexschooleating","/admin/coupon/").concat(t.tempCoupon.id);this.$http.delete(o,{data:t.tempCoupon}).then((function(o){console.log(o.data),o.data.success?(i()("#delCouponModal").modal("hide"),t.getCoupons()):(i()("#delCouponModal").modal("hide"),alert("刪除失敗"))}))}},created:function(){this.getCoupons()}},c=l,d=e("2877"),r=Object(d["a"])(c,a,n,!1,null,null,null);o["default"]=r.exports},"99af":function(t,o,e){"use strict";var a=e("23e7"),n=e("d039"),s=e("e8b5"),i=e("861d"),l=e("7b0b"),c=e("50c4"),d=e("8418"),r=e("65f0"),p=e("1dde"),u=e("b622"),m=e("60ae"),v=u("isConcatSpreadable"),h=9007199254740991,C="Maximum allowed index exceeded",b=m>=51||!n((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),f=p("concat"),_=function(t){if(!i(t))return!1;var o=t[v];return void 0!==o?!!o:s(t)},g=!b||!f;a({target:"Array",proto:!0,forced:g},{concat:function(t){var o,e,a,n,s,i=l(this),p=r(i,0),u=0;for(o=-1,a=arguments.length;o<a;o++)if(s=-1===o?i:arguments[o],_(s)){if(n=c(s.length),u+n>h)throw TypeError(C);for(e=0;e<n;e++,u++)e in s&&d(p,u,s[e])}else{if(u>=h)throw TypeError(C);d(p,u++,s)}return p.length=u,p}})}}]);
//# sourceMappingURL=chunk-d7e54a0a.2a46319c.js.map